<!doctype html>
<html ng-app="angTask">

<head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular.js"></script>
    <script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.9.0.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <style>
    .red .progress-bar{
        background-color: red !important;
    }
    </style>
</head>

<body ng-controller="ProgressCtrl">
    <div class="row">
        <div class="col-md-12">
            <div ng-class="{'red': enpoint.bars[0] > 100}">
                <progressbar value="enpoint.bars[0]"><span style="color:black; white-space:nowrap;">{{enpoint.bars[0]}}%</span></progressbar>
            </div>
            <div ng-class="{'red': enpoint.bars[1] > 100}">
                <progressbar value="enpoint.bars[1]"><span style="color:black; white-space:nowrap;">{{enpoint.bars[1]}}%</span></progressbar>
            </div>

            <div ng-class="{'red': enpoint.bars[2] > 100}">
                <progressbar value="enpoint.bars[2]"><span style="color:black; white-space:nowrap;">{{enpoint.bars[2]}}%</span></progressbar>
            </div>


        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div>
                <select ng-model="progress.barId" ng-options="list.id as list.name for list in progress.progresslist"></select>

            </div>
        </div>
        <div class="col-md-6">
            <button type="button" class="btn btn-sm btn-primary" ng-click="clickBtn(enpoint.buttons[0])">{{enpoint.buttons[0]}}</button>
            <button type="button" class="btn btn-sm btn-primary" ng-click="clickBtn(enpoint.buttons[1])">{{enpoint.buttons[1]}}</button>
            <button type="button" class="btn btn-sm btn-primary" ng-click="clickBtn(enpoint.buttons[2])">{{enpoint.buttons[2]}}</button>
            <button type="button" class="btn btn-sm btn-primary" ng-click="clickBtn(enpoint.buttons[3])">{{enpoint.buttons[3]}}</button>
        </div>

    </div>
    <script>
    //angular.module('angTask', ['ui.bootstrap']);
var app = angular.module('angTask', ['ui.bootstrap']);

app.value('enpoint', {
  buttons: [49,
35,
-17,
-16],
  bars: [26,
82,
38],
  limit: 110
});

app.controller('ProgressCtrl', function ($scope, $interval, enpoint) {
  
  $scope.enpoint = enpoint;
  $scope.dynamic = enpoint.bars[0];
  $scope.max = enpoint.limit;

  $scope.progress = {};
  $scope.progress.barId = "0";

  $scope.progress.progresslist = [
    {
      id: "0",
      name: "#progress1"
    },
    {
      id: "1",
      name: "#progress2"
    },
    {
      id: "2",
      name: "#progress3"
    }];

  $scope.clickBtn = function (value) {
    console.log($scope.progress.barId);
    console.log(value);
    var dynamicvalue = $scope.enpoint.bars[$scope.progress.barId] + value;

    

    if (dynamicvalue >= 0) {
        if(dynamicvalue > $scope.enpoint.limit){
            $scope.enpoint.bars[$scope.progress.barId] = $scope.enpoint.limit;
        }
        else{
             $scope.enpoint.bars[$scope.progress.barId] = dynamicvalue;
        }
     
    }
    else {
      $scope.enpoint.bars[$scope.progress.barId] = 0;
    }

  }

  $scope.subtracttwentyfive = function () {
    var value = Math.floor((Math.random() * 75) + 1);
    $scope.max = $scope.dynamic + value;
  };

  //$scope.subtracttwentyfive();

});

app.controller('ProgressCtrl2', function ($scope, $interval, enpoint) {
  $scope.dynamic = enpoint.bars[1];
  $scope.max = enpoint.limit;

  $scope.subtracttwentyfive = function () {
    var value = Math.floor((Math.random() * 100) + 1);
    $scope.max = $scope.dynamic + value;
  };

  //$scope.subtracttwentyfive();

});





app.controller('listCtrl', function ($scope) {

});


</script>
</body>

</html>